var config = require('config.json');
var fs = require('fs');

// main 进程环境
/**
当前端登录后, db.init时, 调用db_client的init
*/

var Evt = {
    defaultUrl: config.host,
    leanoteUrl: config.host,
    // 
    dataBasePath: '',

    init: function (curUser, dbPath, dataBasePath) {
        this.curUser = curUser;
        this.setHost(curUser.Host);
        this.dataBasePath = dataBasePath;
    },

    setHost: function(host) {
        if(!host) {
            this.leanoteUrl = this.defaultUrl;
        } else {
            this.leanoteUrl = config.host;
        }
    },

    getHost: function() {
        return this.leanoteUrl;
    },

    getCurUserId: function () {
        return this.curUser.UserId;
    },

    getToken: function () {
        return this.curUser.Token;
    },

    // 用户的图片路径
    getCurUserImagesPath: function() {
        return this.dataBasePath + '/data/' + this.getCurUserId() + '/images';;
    },
};

module.exports = Evt; 
